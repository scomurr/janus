[{"createdAt":"2025-09-29T13:58:47.468Z","updatedAt":"2025-09-29T14:12:18.000Z","id":"LncHS1crHklEBddz","name":"03a - Initial Deep Scoring","active":false,"isArchived":false,"nodes":[{"parameters":{"operation":"executeQuery","query":"SELECT *\nFROM ticker_universe\nWHERE exchange IN ('NASDAQ','NYSE','AMEX','NYSEMKT','NYSEARCA')\n  -- Size\n  AND market_cap IS NOT NULL\n  AND market_cap > 0\n  AND market_cap < 300000000\n  -- Real operating biz\n  AND total_revenue IS NOT NULL\n  AND total_revenue >= 10000000                 -- tighten: at least $10m revenue\n  AND gross_margins IS NOT NULL\n  AND gross_margins >= 0.20                     -- tighten: min 20% gross margin\n  -- Valuation sanity (donâ€™t exclude loss-makers via NULL)\n  AND (trailing_pe IS NULL OR trailing_pe BETWEEN 3 AND 60)\n  -- Dividends sanity\n  AND (dividend_yield IS NULL OR dividend_yield < 30)\n  -- 52w range sanity\n  AND fifty_two_week_high IS NOT NULL\n  AND fifty_two_week_low IS NOT NULL\n  AND fifty_two_week_high > 0\n  AND fifty_two_week_low > 0\n  AND (fifty_two_week_high / fifty_two_week_low) < 50   -- tighter than 100\n  -- Efficiency: revenue vs market cap (tighter)\n  AND (total_revenue / market_cap) >= 0.10\n  -- Liquidity proxy (use what you have)\n  AND volume IS NOT NULL\n  AND volume >= 100000                         -- tighten: last-day shares traded\n  -- Exclude wrappers/instruments\n  AND name NOT ILIKE '%ETF%'\n  AND name NOT ILIKE '%ETN%'\n  AND name NOT ILIKE '%Fund%'\n  AND name NOT ILIKE '%Trust%'\n  AND name NOT ILIKE '%Closed-End%'\n  AND name NOT ILIKE '%Warrant%'\n  AND name NOT ILIKE '%Unit%'\n  AND symbol NOT LIKE '%$%'                   -- preferreds/series\nORDER BY market_cap ASC;\n","options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.6,"position":[-304,208],"id":"371af980-7068-4802-8f97-cd83d8844878","name":"Execute a SQL query","credentials":{"postgres":{"id":"MI553DLfDKBYBMXy","name":"Postgres account"}}},{"parameters":{"content":"The LLM are supposed to return buy/hold/sell. Buy means analyze depeeper. Hold means (if we're in a position) to hold, and sell means skip for now."},"type":"n8n-nodes-base.stickyNote","position":[-64,-400],"typeVersion":1,"id":"333de2d4-ac17-45c4-8131-2bdfa979fa34","name":"Sticky Note"},{"parameters":{"rule":{"interval":[{"field":"weeks","triggerAtHour":8}]}},"type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.2,"position":[-752,112],"id":"46c784b3-caa5-48a4-9d4c-999760df1bcc","name":"Sunday 8AM"},{"parameters":{"authentication":"webhook","content":"=Workflow started:  {{ $workflow.name }}","options":{}},"type":"n8n-nodes-base.discord","typeVersion":2,"position":[-528,16],"id":"380dc811-92e2-4e84-8724-4f8cc1c26238","name":"Workflow Started","webhookId":"ebb5bbf9-0b8e-4aca-b93d-530cac59fe51","credentials":{"discordWebhookApi":{"id":"hXnySa96N3aNgiBT","name":"Janus Errors Webhook"}}},{"parameters":{"assignments":{"assignments":[{"id":"586de83c-c024-406a-a8b2-fee66191edeb","name":"nextMonday","value":"={{ $now.plus({ days: ((8 - $now.weekday) % 7) || 7 }).toFormat(\"yyyy-MM-dd\") }}","type":"string"},{"id":"ea7ccc33-e3e3-4062-a486-c2b42148c86e","name":"today","value":"={{ $now.toFormat(\"yyyy-MM-dd\") }}","type":"string"},{"id":"0cca7e10-3610-45d9-b024-7afeacb50a08","name":"limit","value":250,"type":"number"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-528,208],"id":"feb281dd-7b38-4557-b275-6a3056d25b1c","name":"Set Dates"},{"parameters":{"operation":"executeQuery","query":"select * FROM ticker_universe\nWHERE market_cap IS NOT NULL\n  AND market_cap > 0\n  AND market_cap < 300000000\n  AND total_revenue IS NOT NULL\n  AND total_revenue > 0\n  AND gross_margins IS NOT NULL\n  AND gross_margins > 0\n  AND volume > 10000\n  -- P/E ratio sanity\n  AND trailing_pe IS NOT NULL\n  AND trailing_pe > 0\n  AND trailing_pe < 100\n  -- Dividend sanity\n  AND (dividend_yield IS NULL OR dividend_yield < 50)\n  -- 52-week range sanity\n  AND fifty_two_week_high IS NOT NULL\n  AND fifty_two_week_low IS NOT NULL\n  AND fifty_two_week_high > 0\n  AND fifty_two_week_low > 0\n  AND (fifty_two_week_high / fifty_two_week_low) < 100\n  -- Revenue vs Market Cap sanity\n  AND total_revenue > market_cap * 0.01\n  -- Liquidity sanity\n  AND volume > (market_cap / 1000)\nORDER BY market_cap ASC;","options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.6,"position":[0,0],"id":"1d3bffb4-0e13-4f58-a28c-76e4f843a9ae","name":"Execute a SQL query1","credentials":{"postgres":{"id":"MI553DLfDKBYBMXy","name":"Postgres account"}}}],"connections":{"Execute a SQL query":{"main":[[]]},"Sunday 8AM":{"main":[[{"node":"Workflow Started","type":"main","index":0},{"node":"Set Dates","type":"main","index":0}]]},"Set Dates":{"main":[[{"node":"Execute a SQL query","type":"main","index":0},{"node":"Execute a SQL query1","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{"node:Sunday 8AM":{"recurrenceRules":[]}},"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"1f838708-84b2-4846-b827-428dcd312530","triggerCount":1,"tags":[{"createdAt":"2025-09-04T15:23:38.975Z","updatedAt":"2025-09-04T15:23:38.975Z","id":"yQaAGmyd3yVCL790","name":"janus"}],"shared":[{"createdAt":"2025-09-29T13:58:47.476Z","updatedAt":"2025-09-29T13:58:47.476Z","role":"workflow:owner","workflowId":"LncHS1crHklEBddz","projectId":"33RSXH6V1FUTQaMQ","project":{"createdAt":"2025-08-29T14:57:46.722Z","updatedAt":"2025-08-29T15:00:17.904Z","id":"33RSXH6V1FUTQaMQ","name":"Scott Murray <scomurr@scomurr.com>","type":"personal","icon":null,"description":null}}]}]